# Test config for distributed prepare + workload + cleanup
# Tests full lifecycle with 2+ agents and cleanup=true

target: "file:///tmp/sai3-test-full-lifecycle/"
duration: "3s"
concurrency: 4

prepare:
  cleanup: true  # Enable cleanup after workload
  cleanup_mode: tolerant
  ensure_objects:
    - base_uri: "file:///tmp/sai3-test-full-lifecycle/"
      count: 30
      fill: zero
      size_spec: 2048
      dedup_factor: 1
      compress_factor: 1

workload:
  - op: get
    path: "*"
    weight: 70
  - op: stat
    path: "*"
    weight: 30

# Distributed Configuration (2 local agents)
distributed:
  shared_filesystem: true
  tree_creation_mode: coordinator
  path_selection: random
  
  # v0.8.50: Enable barrier synchronization for full lifecycle coordination
  barrier_sync:
    enabled: true
  
  agents:
    - address: "127.0.0.1:7761"
      id: "agent-1"
    - address: "127.0.0.1:7762"
      id: "agent-2"
