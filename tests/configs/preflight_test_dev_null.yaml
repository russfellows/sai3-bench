# Pre-flight test: Device file /dev/null (STANDALONE mode)
# This should WARN about device testing but allow it
# No setup required - /dev/null always exists
# NOTE: No distributed section - runs in standalone mode

target: "file:///dev/null"
duration: "30s"       # Short test
concurrency: 8        # Small concurrency for local testing

prepare:
  prepare_strategy: parallel
  skip_verification: false  # First run: verify detection works
  
  # Small directory tree for testing
  directory_structure:
    width: 4                  # 4 subdirectories per level
    depth: 2                  # 2 levels deep
    files_per_dir: 20         # 10 per agent × 2 agents = 20 files per directory
    distribution: "bottom"
    dir_mask: "test.d%d_w%d.dir"
  
  # Total: 16 dirs × 20 files = 320 files (~960 MB)
  ensure_objects:
    - base_uri: "file:///dev/null"
      count: 320  # 16 dirs × 20 files = 320 files
      fill: zero  # Fast for local testing
      size_spec:
        type: lognormal
        mean: 3145728      # 3 MB
        std_dev: 1048576   # 1 MB
        min: 1048576       # 1 MB
        max: 4194304       # 4 MB
      dedup_factor: 1
      compress_factor: 1
  
  cleanup: false  # Keep files for second run test

workload:
  - op: get
    path: "test.d*_w*.dir/**/*"
    weight: 100
